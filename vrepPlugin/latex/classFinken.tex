\hypertarget{classFinken}{}\section{Finken Class Reference}
\label{classFinken}\index{Finken@{Finken}}


implementation of a \hyperlink{classFinken}{Finken} rotorcraft, includes communication loop  




{\ttfamily \#include $<$finken.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classFinken_afb256567ee9aa96c409fdb0529b4f228}{Finken} ()
\item 
\hyperlink{classFinken_a26a9cd42385ec3ae010e2ad1387d9ce6}{Finken} (int f\+Handle, int \+\_\+ac\+\_\+id, int \hyperlink{classFinken_a2de6be70e0baaf63641df0214bf1f7a2}{rotor\+Count}, int \hyperlink{classFinken_a92ae4d32222c44c17a4cea91055569d9}{sonar\+Count})
\item 
\hyperlink{classFinken_a94e6a3b5b14ec7ee351d219eb17be45b}{$\sim$\+Finken} ()
\item 
void \hyperlink{classFinken_aa4779668e3bf85253e371b30e0da808a}{connect} (std\+::unique\+\_\+ptr$<$ tcp\+::iostream $>$ \&\&s\+Ptr)
\item 
void \hyperlink{classFinken_ae3c3abbf571407e210f4b03b68cada9d}{run} (std\+::unique\+\_\+ptr$<$ tcp\+::iostream $>$ s\+Ptr)
\item 
void \hyperlink{classFinken_aaead1098c0752c8ec5b99bccd9945f3b}{set\+Rotor\+Speeds} ()
\item 
void \hyperlink{classFinken_afddc56af42f000ff17c4a00779b4ad6a}{update\+Pos} (\hyperlink{classFinken}{Finken} \&finken)
\item 
std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \hyperlink{classSensor}{Sensor} $>$ $>$ \& \hyperlink{classFinken_a1215883fb6df7c4853e498dec43b4e6a}{get\+Sensors} ()
\item 
std\+::vector$<$ std\+::unique\+\_\+ptr$<$ \hyperlink{classRotor}{Rotor} $>$ $>$ \& \hyperlink{classFinken_a610ce496f1c5f2ca22850ee26c54510c}{get\+Rotors} ()
\end{DoxyCompactItemize}
\begin{Indent}{\bf Construction functions}\par
{\em Functions needed to construct the copter in the vrep plugin \begin{DoxySeeAlso}{See also}
\hyperlink{finken_8cpp_ab8920c514423348469521fe0063534c4}{build\+Finken()} 
\end{DoxySeeAlso}
}\begin{DoxyCompactItemize}
\item 
void \hyperlink{classFinken_a2f2adb211e80a689f580b87730aeb9d1}{add\+Sensor} (std\+::unique\+\_\+ptr$<$ \hyperlink{classSensor}{Sensor} $>$ \&sensor)
\item 
void \hyperlink{classFinken_a4ac9d9b37fba41147a83a36286fbe91b}{add\+Rotor} (std\+::unique\+\_\+ptr$<$ \hyperlink{classRotor}{Rotor} $>$ \&rotor)
\end{DoxyCompactItemize}
\end{Indent}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classFinken_a96990553bc26c8bf26effe8edd6e6369}{handle}
\item 
int \hyperlink{classFinken_aef4736605ea21831e5340f66a931f8ac}{base\+Handle}
\item 
const int \hyperlink{classFinken_a496f5024f0876710ca1cfd55a2924e85}{ac\+\_\+id}
\item 
const int \hyperlink{classFinken_a2de6be70e0baaf63641df0214bf1f7a2}{rotor\+Count}
\item 
const int \hyperlink{classFinken_a92ae4d32222c44c17a4cea91055569d9}{sonar\+Count}
\item 
bool \hyperlink{classFinken_a83131e08852cbcebaffa1eef80164a6e}{connected} = 0
\item 
std\+::thread {\bfseries run\+Thread}\hypertarget{classFinken_a490f025c596b5c87d1c583124b53e34b}{}\label{classFinken_a490f025c596b5c87d1c583124b53e34b}

\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_aa4fe546d88b52ff92990bd67ced70567}{commands} = \{0,0,0,0\}
\end{DoxyCompactItemize}
\begin{Indent}{\bf Copter state}\par
{\em \label{classFinken_copterstate}%
\hypertarget{classFinken_copterstate}{}%
 Members representing the current copter state }\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_a726c0ea1d756fe0837a3f042665d8d4a}{pos} = \{-\/1,-\/1,-\/1\}
\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_a3968cbe3b6f76678367ecb61f044a221}{quat} = \{-\/1,-\/1,-\/1,-\/1\}
\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_a4dd260e6384e7cfb8040bd53fe1c2d62}{vel} = \{-\/1,-\/1,-\/1\}
\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_a518ab8ab8ac8cf54c0b79cbc1ec2075f}{rot\+Vel} =\{-\/1,-\/1,-\/1\}
\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_a6f9723479baee5573447036270a2a722}{accel} = \{-\/1,-\/1,-\/1\}
\item 
std\+::vector$<$ double $>$ \hyperlink{classFinken_ab1b738a1b691879be240b1b9488f7009}{rot\+Accel} =\{-\/1,-\/1,-\/1\}
\end{DoxyCompactItemize}
\end{Indent}


\subsection{Detailed Description}
implementation of a \hyperlink{classFinken}{Finken} rotorcraft, includes communication loop 

\hyperlink{classFinken}{Finken} class for handling any data exchanges between a F\+I\+Nken and paparazzi. Also handles the application of rotor mixing commands to the F\+I\+Nken. 

\subsection{Constructor \& Destructor Documentation}
\index{Finken@{Finken}!Finken@{Finken}}
\index{Finken@{Finken}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{Finken()}{Finken()}}]{\setlength{\rightskip}{0pt plus 5cm}Finken\+::\+Finken (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_afb256567ee9aa96c409fdb0529b4f228}{}\label{classFinken_afb256567ee9aa96c409fdb0529b4f228}
Basic Empty Constructor \index{Finken@{Finken}!Finken@{Finken}}
\index{Finken@{Finken}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{Finken(int f\+Handle, int \+\_\+ac\+\_\+id, int rotor\+Count, int sonar\+Count)}{Finken(int fHandle, int _ac_id, int rotorCount, int sonarCount)}}]{\setlength{\rightskip}{0pt plus 5cm}Finken\+::\+Finken (
\begin{DoxyParamCaption}
\item[{int}]{f\+Handle, }
\item[{int}]{\+\_\+ac\+\_\+id, }
\item[{int}]{rotor\+Count, }
\item[{int}]{sonar\+Count}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_a26a9cd42385ec3ae010e2ad1387d9ce6}{}\label{classFinken_a26a9cd42385ec3ae010e2ad1387d9ce6}
Constructor for creating a uniquely identifiable finken 
\begin{DoxyParams}{Parameters}
{\em f\+Handle} & the handle used to identify the finken in vrep \\
\hline
{\em \+\_\+ac\+\_\+id} & the Aircraft ID used to identify the copter in paparazzi \\
\hline
\end{DoxyParams}
\index{Finken@{Finken}!````~Finken@{$\sim$\+Finken}}
\index{````~Finken@{$\sim$\+Finken}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{$\sim$\+Finken()}{~Finken()}}]{\setlength{\rightskip}{0pt plus 5cm}Finken\+::$\sim$\+Finken (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classFinken_a94e6a3b5b14ec7ee351d219eb17be45b}{}\label{classFinken_a94e6a3b5b14ec7ee351d219eb17be45b}
Basic destructor 

\subsection{Member Function Documentation}
\index{Finken@{Finken}!add\+Rotor@{add\+Rotor}}
\index{add\+Rotor@{add\+Rotor}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{add\+Rotor(std\+::unique\+\_\+ptr$<$ Rotor $>$ \&rotor)}{addRotor(std::unique_ptr< Rotor > &rotor)}}]{\setlength{\rightskip}{0pt plus 5cm}void Finken\+::add\+Rotor (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf Rotor} $>$ \&}]{rotor}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_a4ac9d9b37fba41147a83a36286fbe91b}{}\label{classFinken_a4ac9d9b37fba41147a83a36286fbe91b}
Adding rotors to the copter. \index{Finken@{Finken}!add\+Sensor@{add\+Sensor}}
\index{add\+Sensor@{add\+Sensor}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{add\+Sensor(std\+::unique\+\_\+ptr$<$ Sensor $>$ \&sensor)}{addSensor(std::unique_ptr< Sensor > &sensor)}}]{\setlength{\rightskip}{0pt plus 5cm}void Finken\+::add\+Sensor (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf Sensor} $>$ \&}]{sensor}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_a2f2adb211e80a689f580b87730aeb9d1}{}\label{classFinken_a2f2adb211e80a689f580b87730aeb9d1}
Adding sensors to the copter. \index{Finken@{Finken}!connect@{connect}}
\index{connect@{connect}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{connect(std\+::unique\+\_\+ptr$<$ tcp\+::iostream $>$ \&\&s\+Ptr)}{connect(std::unique_ptr< tcp::iostream > &&sPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}void Finken\+::connect (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ tcp\+::iostream $>$ \&\&}]{s\+Ptr}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\hypertarget{classFinken_aa4779668e3bf85253e371b30e0da808a}{}\label{classFinken_aa4779668e3bf85253e371b30e0da808a}
Called in the accept handler, this function passes the incoming connection to the corresponding finken in a new thread \index{Finken@{Finken}!get\+Rotors@{get\+Rotors}}
\index{get\+Rotors@{get\+Rotors}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{get\+Rotors()}{getRotors()}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ std\+::unique\+\_\+ptr$<$ {\bf Rotor} $>$ $>$ \& Finken\+::get\+Rotors (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_a610ce496f1c5f2ca22850ee26c54510c}{}\label{classFinken_a610ce496f1c5f2ca22850ee26c54510c}
returns a vector containing all rotors of the finken \index{Finken@{Finken}!get\+Sensors@{get\+Sensors}}
\index{get\+Sensors@{get\+Sensors}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{get\+Sensors()}{getSensors()}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$ std\+::unique\+\_\+ptr$<$ {\bf Sensor} $>$ $>$ \& Finken\+::get\+Sensors (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_a1215883fb6df7c4853e498dec43b4e6a}{}\label{classFinken_a1215883fb6df7c4853e498dec43b4e6a}
returns a vector containing all sensors of the finken \index{Finken@{Finken}!run@{run}}
\index{run@{run}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{run(std\+::unique\+\_\+ptr$<$ tcp\+::iostream $>$ s\+Ptr)}{run(std::unique_ptr< tcp::iostream > sPtr)}}]{\setlength{\rightskip}{0pt plus 5cm}void Finken\+::run (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ tcp\+::iostream $>$}]{s\+Ptr}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_ae3c3abbf571407e210f4b03b68cada9d}{}\label{classFinken_ae3c3abbf571407e210f4b03b68cada9d}
Main function containing the paparazzi-\/vrep communication loop. Called whenever a new connection from paparazzi to the vrep server is established, see Async\+\_\+\+Server\+::handle\+\_\+accept() 
\begin{DoxyParams}{Parameters}
{\em s\+Ptr} & the iostream of the connection \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
Async\+\_\+\+Server\+::handle\+\_\+accept() 
\end{DoxySeeAlso}
\index{Finken@{Finken}!set\+Rotor\+Speeds@{set\+Rotor\+Speeds}}
\index{set\+Rotor\+Speeds@{set\+Rotor\+Speeds}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{set\+Rotor\+Speeds()}{setRotorSpeeds()}}]{\setlength{\rightskip}{0pt plus 5cm}void Finken\+::set\+Rotor\+Speeds (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_aaead1098c0752c8ec5b99bccd9945f3b}{}\label{classFinken_aaead1098c0752c8ec5b99bccd9945f3b}
Applies the correct rotor speeds calculated by paparazzi \begin{DoxySeeAlso}{See also}
\hyperlink{classFinken_aa4fe546d88b52ff92990bd67ced70567}{Finken\+::commands} 

\hyperlink{finken_8h_a4e838d73ad5e098825ef4c227f6369b6}{thrust\+From\+Throttle} 
\end{DoxySeeAlso}
\index{Finken@{Finken}!update\+Pos@{update\+Pos}}
\index{update\+Pos@{update\+Pos}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{update\+Pos(\+Finken \&finken)}{updatePos(Finken &finken)}}]{\setlength{\rightskip}{0pt plus 5cm}void Finken\+::update\+Pos (
\begin{DoxyParamCaption}
\item[{{\bf Finken} \&}]{finken}
\end{DoxyParamCaption}
)}\hypertarget{classFinken_afddc56af42f000ff17c4a00779b4ad6a}{}\label{classFinken_afddc56af42f000ff17c4a00779b4ad6a}
updates the values for copter position and attitude, namely the \hyperlink{classFinken_copterstate}{copter state} vectors 
\begin{DoxyParams}{Parameters}
{\em finken} & reference to the finken to be updated \\
\hline
\end{DoxyParams}


\subsection{Member Data Documentation}
\index{Finken@{Finken}!ac\+\_\+id@{ac\+\_\+id}}
\index{ac\+\_\+id@{ac\+\_\+id}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{ac\+\_\+id}{ac_id}}]{\setlength{\rightskip}{0pt plus 5cm}const int Finken\+::ac\+\_\+id}\hypertarget{classFinken_a496f5024f0876710ca1cfd55a2924e85}{}\label{classFinken_a496f5024f0876710ca1cfd55a2924e85}
Integer representing the Aircraft ID to match copters in vrep and paparazzi \index{Finken@{Finken}!accel@{accel}}
\index{accel@{accel}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{accel}{accel}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::accel = \{-\/1,-\/1,-\/1\}}\hypertarget{classFinken_a6f9723479baee5573447036270a2a722}{}\label{classFinken_a6f9723479baee5573447036270a2a722}
Copter acceleration \index{Finken@{Finken}!base\+Handle@{base\+Handle}}
\index{base\+Handle@{base\+Handle}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{base\+Handle}{baseHandle}}]{\setlength{\rightskip}{0pt plus 5cm}int Finken\+::base\+Handle}\hypertarget{classFinken_aef4736605ea21831e5340f66a931f8ac}{}\label{classFinken_aef4736605ea21831e5340f66a931f8ac}
Integer representing the handle of the copter base in Vrep. Copter base, not the copter object is used for the calculation of the copter state. \index{Finken@{Finken}!commands@{commands}}
\index{commands@{commands}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{commands}{commands}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::commands = \{0,0,0,0\}}\hypertarget{classFinken_aa4fe546d88b52ff92990bd67ced70567}{}\label{classFinken_aa4fe546d88b52ff92990bd67ced70567}
Vector storing the commands provided by paparazzi \index{Finken@{Finken}!connected@{connected}}
\index{connected@{connected}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{connected}{connected}}]{\setlength{\rightskip}{0pt plus 5cm}bool Finken\+::connected = 0}\hypertarget{classFinken_a83131e08852cbcebaffa1eef80164a6e}{}\label{classFinken_a83131e08852cbcebaffa1eef80164a6e}
current connection status of the copter \index{Finken@{Finken}!handle@{handle}}
\index{handle@{handle}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{handle}{handle}}]{\setlength{\rightskip}{0pt plus 5cm}int Finken\+::handle}\hypertarget{classFinken_a96990553bc26c8bf26effe8edd6e6369}{}\label{classFinken_a96990553bc26c8bf26effe8edd6e6369}
Integer representing the handle of the copter object in vrep \index{Finken@{Finken}!pos@{pos}}
\index{pos@{pos}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{pos}{pos}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::pos = \{-\/1,-\/1,-\/1\}}\hypertarget{classFinken_a726c0ea1d756fe0837a3f042665d8d4a}{}\label{classFinken_a726c0ea1d756fe0837a3f042665d8d4a}
Copter position (E\+NU) \index{Finken@{Finken}!quat@{quat}}
\index{quat@{quat}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{quat}{quat}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::quat = \{-\/1,-\/1,-\/1,-\/1\}}\hypertarget{classFinken_a3968cbe3b6f76678367ecb61f044a221}{}\label{classFinken_a3968cbe3b6f76678367ecb61f044a221}
Copter Quaternion \index{Finken@{Finken}!rot\+Accel@{rot\+Accel}}
\index{rot\+Accel@{rot\+Accel}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{rot\+Accel}{rotAccel}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::rot\+Accel =\{-\/1,-\/1,-\/1\}}\hypertarget{classFinken_ab1b738a1b691879be240b1b9488f7009}{}\label{classFinken_ab1b738a1b691879be240b1b9488f7009}
Copter rotational acceleration (aka angular acceleration) \index{Finken@{Finken}!rotor\+Count@{rotor\+Count}}
\index{rotor\+Count@{rotor\+Count}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{rotor\+Count}{rotorCount}}]{\setlength{\rightskip}{0pt plus 5cm}const int Finken\+::rotor\+Count}\hypertarget{classFinken_a2de6be70e0baaf63641df0214bf1f7a2}{}\label{classFinken_a2de6be70e0baaf63641df0214bf1f7a2}
Integer representing the amount of rotors, used in automatic finken construction \begin{DoxySeeAlso}{See also}
\hyperlink{finken_8cpp_ab8920c514423348469521fe0063534c4}{build\+Finken()} 
\end{DoxySeeAlso}
\index{Finken@{Finken}!rot\+Vel@{rot\+Vel}}
\index{rot\+Vel@{rot\+Vel}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{rot\+Vel}{rotVel}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::rot\+Vel =\{-\/1,-\/1,-\/1\}}\hypertarget{classFinken_a518ab8ab8ac8cf54c0b79cbc1ec2075f}{}\label{classFinken_a518ab8ab8ac8cf54c0b79cbc1ec2075f}
Copter rotational velocity (aka angular velocity) \index{Finken@{Finken}!sonar\+Count@{sonar\+Count}}
\index{sonar\+Count@{sonar\+Count}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{sonar\+Count}{sonarCount}}]{\setlength{\rightskip}{0pt plus 5cm}const int Finken\+::sonar\+Count}\hypertarget{classFinken_a92ae4d32222c44c17a4cea91055569d9}{}\label{classFinken_a92ae4d32222c44c17a4cea91055569d9}
Integer representing the amount of sonars, used in automatic finken construction$\ast$$\ast$ \begin{DoxySeeAlso}{See also}
\hyperlink{finken_8h_ab8920c514423348469521fe0063534c4}{build\+Finken} / 
\end{DoxySeeAlso}
\index{Finken@{Finken}!vel@{vel}}
\index{vel@{vel}!Finken@{Finken}}
\subsubsection[{\texorpdfstring{vel}{vel}}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<$double$>$ Finken\+::vel = \{-\/1,-\/1,-\/1\}}\hypertarget{classFinken_a4dd260e6384e7cfb8040bd53fe1c2d62}{}\label{classFinken_a4dd260e6384e7cfb8040bd53fe1c2d62}
Copter velocity 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{finken_8h}{finken.\+h}\item 
\hyperlink{finken_8cpp}{finken.\+cpp}\end{DoxyCompactItemize}
